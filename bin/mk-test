#!/bin/sh

set -eu

if [ "$#" -eq 0 ]; then
  echo "usage: $0 <path>..."
fi

old_pwd="$PWD"
for x in "$@"; do
  mkdir "$x"
  cd "$x"
  touch run.sh inp.sml out.txt
  echo "cargo run -- inp.sml >out.tmp" >> run.sh
  echo "diff out.txt out.tmp" >> run.sh
  cd "$old_pwd"
done
